/*! CoCart Pro v1.0.0-beta.2 Thursday 25th July 2019 20:52:02 PM GMT+0200 */
var $=jQuery;function Modal(t){var e=this;this.elem=t,this.overlay=$(".cocart-pro-modal-overlay"),this.radio=$("input[name=reason]",t),this.closer=$(".cocart-pro-modal-close, .cocart-pro-modal-cancel",t),this.return=$(".cocart-pro-modal-return",t),this.opener=$('.plugins [data-slug="cocart-pro"] .deactivate'),this.question=$(".cocart-pro-modal-question",t),this.button=$(".button-primary",t),this.title=$(".cocart-pro-modal-header h2",t),this.textFields=$("input[type=text], textarea",t),this.hiddenReason=$("#cocart-pro-reason",t),this.hiddenDetails=$("#cocart-pro-details",t),this.titleText=this.title.text(),this.opener.click(function(){return e.open(),!1}),this.closer.click(function(){return e.close(),!1}),t.bind("keyup",function(){if(27==event.keyCode)return e.close(),!1}),this.return.click(function(){return e.returnToQuestion(),!1}),this.radio.change(function(){e.change($(this))}),this.textFields.keyup(function(){e.hiddenDetails.val($(this).val()),""!=e.hiddenDetails.val()?(e.button.removeClass("cocart-pro-isDisabled"),e.button.removeAttr("disabled")):(e.button.addClass("cocart-pro-isDisabled"),e.button.attr("disabled",!0))})}$(document).ready(function(){var t=$(".cocart-pro-modal");t&&new Modal(t),$("#send-deactivation").on("click",function(t){var e=$("#cocart-pro-reason").val(),o=$("#cocart-pro-details").val(),a=$(this).attr("href");t.preventDefault(),$.post($("#ajax_url").val(),{action:"cocart_pro_feedback_modal",fb_reason:e,fb_details:o}).done(function(t){t?window.location.href=a:console.log("No response!")})})}),Modal.prototype.change=function(t){var e=t.attr("id"),o=this;switch(this.hiddenReason.val(t.val()),this.hiddenDetails.val(""),this.textFields.val(""),$(".cocart-pro-modal-fieldHidden").removeClass("cocart-pro-isOpen"),$(".cocart-pro-modal-hidden").removeClass("cocart-pro-isOpen"),this.button.removeClass("cocart-pro-isDisabled"),this.button.removeAttr("disabled"),e){case"reason-temporary":break;default:var a=$("#"+e+"-panel"),s=t.siblings(".cocart-pro-modal-fieldHidden");if(0<a.length){o.question.removeClass("cocart-pro-isOpen"),o.return.addClass("cocart-pro-isOpen"),a.addClass("cocart-pro-isOpen");var i=a.find("h3").text();this.title.text(i)}else 0<s.length&&(s.addClass("cocart-pro-isOpen"),s.find("input, textarea").focus(),o.button.addClass("cocart-pro-isDisabled"),o.button.attr("disabled",!0))}},Modal.prototype.returnToQuestion=function(){$(".cocart-pro-modal-fieldHidden").removeClass("cocart-pro-isOpen"),$(".cocart-pro-modal-hidden").removeClass("cocart-pro-isOpen"),this.question.addClass("cocart-pro-isOpen"),this.return.removeClass("cocart-pro-isOpen"),this.title.text(this.titleText),this.hiddenReason.val(""),this.hiddenDetails.val(""),this.radio.attr("checked",!1),this.button.addClass("cocart-pro-isDisabled"),this.button.attr("disabled",!0)},Modal.prototype.open=function(){this.elem.css("display","block"),this.overlay.css("display","block"),localStorage.setItem("cocart-pro-hash","")},Modal.prototype.close=function(){this.returnToQuestion(),this.elem.css("display","none"),this.overlay.css("display","none")};